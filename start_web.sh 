#!/bin/bash
# Streamlitå¯åŠ¨è„šæœ¬

echo "=========================================="
echo "ğŸš€ å¯åŠ¨ä¾›åº”å•†æ™ºèƒ½åŒ¹é…ç³»ç»Ÿ Webç•Œé¢"
echo "=========================================="

# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ
if [[ "$VIRTUAL_ENV" == "" ]]; then
    echo "âš ï¸  è™šæ‹Ÿç¯å¢ƒæœªæ¿€æ´»"
    echo "æ­£åœ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ..."
    source ../.venv/bin/activate || source ../.venv1/bin/activate
fi

# æ£€æŸ¥ä¾èµ–
echo ""
echo "ğŸ“¦ æ£€æŸ¥ä¾èµ–..."
python -c "import streamlit" 2>/dev/null
if [ $? -ne 0 ]; then
    echo "âŒ Streamlitæœªå®‰è£…"
    echo "æ­£åœ¨å®‰è£…..."
    pip install streamlit pandas openpyxl plotly
fi

echo ""
echo "âœ… å‡†å¤‡å°±ç»ªï¼"
echo ""
echo "=========================================="
echo "ğŸŒ Webç•Œé¢åœ°å€:"
echo "   http://localhost:8501"
echo "=========================================="
echo ""
echo "ğŸ’¡ ä½¿ç”¨Ctrl+Cåœæ­¢æœåŠ¡"
echo ""

# å¯åŠ¨Streamlit
streamlit run streamlit_app/app.py \
    --server.port 8501 \
    --server.address localhost \
    --theme.base light \
    --theme.primaryColor "#1f77b4"